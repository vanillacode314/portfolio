<div class="flex flex-col gap-1">
	<h2 class="mx-auto my-10 text-xl font-semibold uppercase text-gray-700">Get in touch</h2>
	<section aria-label="contact" id="contact" class="flex flex-col gap-5 items-center">
		<a
			id="book-a-call"
			href="https://tidycal.com/raqueebuddin.aziz.314/30-minute-meeting"
			target="_blank"
			class="mx-auto text-gray-100 font-bold uppercase tracking-wide px-5 py-3 rounded-10 flex gap-3 items-center bg-green-700 hover:bg-green-600 focus:bg-green-600 transition-colors"
		>
			<span class="text-xl i-mdi-phone"></span>
			 Book A Call
		</a>
		<script>
			document.getElementById('book-a-call')?.addEventListener('click', function () {
				window.gtag('event', 'generate_lead', {
					event_category: 'Lead Generation',
					event_label: 'Book A Call'
				})
				fbq('track', 'Contact')
			})
		</script>
		<!-- <script is:inline async defer src="https://asset-tidycal.b-cdn.net//js/embed.js"></script> -->
		<!-- <div id="tidycal-embed" data-path="raqueebuddin.aziz.314/30-minute-meeting"></div> -->
		<!-- <style is:global> -->
		<!-- 	.tidycal-embed { -->
		<!-- 		border-radius: 2.5rem; -->
		<!-- 		padding: 1.5rem; -->
		<!-- 		background-color: white; -->
		<!-- 		box-shadow: -->
		<!-- 			0 10px 15px -3px rgb(0 0 0 / 0.1), -->
		<!-- 			0 4px 6px -4px rgb(0 0 0 / 0.1); -->
		<!-- 	} -->
		<!-- </style> -->
		<span class="text-xl uppercase tracking-wide text-center">OR</span>
		<form
			name="contact"
			data-netlify="true"
			method="post"
			class="rounded-10 flex flex-col gap-5 overflow-hidden bg-gray-100 p-10 text-gray-900 shadow-lg w-full border-2 border-gray-700"
		>
			<div class="flex flex-col gap-1">
				<label for="name" class="ml-3 text-xs font-semibold uppercase tracking-wide text-gray-600"
					>Name</label
				>
				<input
					type="text"
					name="name"
					id="name"
					placeholder="e.g. John Doe"
					class="rounded-5 w-full min-w-0 px-5 py-3"
					required
				/>
			</div>
			<div class="flex flex-col gap-1">
				<label class="ml-3 text-xs font-semibold uppercase tracking-wide text-gray-600" for="email"
					>Email</label
				>
				<input
					name="email"
					type="email"
					id="email"
					placeholder="e.g. name@domain.com"
					class="rounded-5 w-full min-w-0 px-5 py-3"
					required
				/>
			</div>
			<div class="flex flex-col gap-1">
				<label
					class="ml-3 text-xs font-semibold uppercase tracking-wide text-gray-600"
					for="message">Message</label
				>
				<textarea
					name="message"
					id="message"
					placeholder="Your message here"
					class="rounded-5 min-h-xs w-full min-w-0 px-5 py-3"
					required></textarea>
			</div>
			<button
				class="rounded-5 ml-auto whitespace-nowrap bg-orange-600 px-5 py-3 font-bold text-white shadow-lg transition hover:bg-orange-700 hover:shadow-none"
			>
				Send Message
			</button>
		</form>
	</section>
	<script>
		import { submitFormWithoutListener } from '@/utils'
		const form = document.querySelector("form[name='contact']") as HTMLFormElement
		function onSubmit(e: SubmitEvent) {
			e.preventDefault()
			const timer = setTimeout(
				() => submitFormWithoutListener(e.target as HTMLFormElement, onSubmit),
				1000
			)
			window.gtag('event', 'generate_lead', {
				event_category: 'Lead Generation',
				event_label: 'Contact Form',
				event_callback: function () {
					clearTimeout(timer)
					submitFormWithoutListener(e.target as HTMLFormElement, onSubmit)
				}
			})
			fbq('track', 'Contact')
		}
		form.addEventListener('submit', onSubmit)
	</script>
</div>
